# フロントエンド実装

## 概要

企業影響力ダッシュボードのフロントエンドは、React 19 + TypeScript + Tailwind CSS v4 で構築されています。
モダンな開発体験と高性能なユーザーインターフェースを提供します。

## 技術スタック ✅ **実装完了**

### コア技術

- **React 19**: 最新のUI フレームワーク
- **TypeScript**: 型安全な開発体験
- **Vite**: 高速ビルドツール・開発サーバー
- **Tailwind CSS v4**: ユーティリティファーストCSS

### ルーティング・状態管理

- **React Router v7**: SPA（Single Page Application）ルーティング
- **React Query v5 (TanStack Query)**: サーバーサイド状態管理・キャッシュ
- **Axios**: HTTP通信ライブラリ

## プロジェクト構成

```
resources/js/
├── app.tsx                    # エントリーポイント
├── styles/
│   └── app.css               # Tailwind CSS + カスタムスタイル
├── components/
│   ├── App.tsx               # メインアプリケーション（ルーティング）
│   ├── Layout.tsx            # レイアウトコンポーネント
│   ├── Header.tsx            # ヘッダーコンポーネント
│   └── Sidebar.tsx           # サイドバーコンポーネント
├── pages/
│   ├── Dashboard.tsx         # ダッシュボードページ
│   └── CompanyDetail.tsx     # 企業詳細ページ
├── services/
│   └── api.ts               # API クライアント（Axios設定）
├── types/
│   └── index.ts             # TypeScript 型定義
├── hooks/
│   └── useApi.ts            # カスタムフック
└── utils/
    └── index.ts             # ユーティリティ関数
```

## 実装済み機能

### 1. ダッシュボードページ (`/`)

**機能**:
- 企業統計情報表示（総企業数・記事数・プラットフォーム数）
- 上位企業ランキング（TOP 10）
- レスポンシブデザイン対応

**API統合**:
- `GET /api/dashboard/stats` - 統計データ取得
- `GET /api/companies/top?limit=10` - 上位企業データ取得

**主要コンポーネント**:
- `DashboardStats` - 統計カード表示
- `TopCompanies` - ランキングテーブル表示
- ローディングスピナー・エラーハンドリング

### 2. 企業詳細ページ (`/companies/{id}`)

**機能**:
- 企業基本情報（名前・説明・影響力スコア・ランキング）
- プラットフォーム連携情報（はてな・Qiita・Zenn）
- 統計情報（総記事数・登録日・最終更新）
- ランキング履歴
- 最新記事一覧
- パンくずナビゲーション

**API統合**:
- `GET /api/companies/{id}` - 企業詳細データ取得

**主要コンポーネント**:
- `CompanyProfile` - 企業基本情報
- `PlatformConnections` - プラットフォーム連携表示  
- `RankingHistory` - ランキング推移表示
- `RecentArticles` - 記事一覧表示

### 3. レイアウトコンポーネント

**Header**:
- アプリケーションタイトル
- ナビゲーションメニュー
- レスポンシブメニュー

**Sidebar**:
- ダッシュボード・ランキング・企業一覧・検索へのナビゲーション
- アクティブ状態の視覚的表示

**Layout**:
- Header + Sidebar + メインコンテンツの統合レイアウト
- レスポンシブ対応

## API クライアント設定

### Axios 設定 (`services/api.ts`)

```typescript
// 主要機能
- CSRF トークン自動設定
- エラーレスポンス統一処理
- 10秒タイムアウト設定
- レスポンスインターセプター
```

### React Query 設定

```typescript
// キャッシュ戦略
- 1回のリトライ設定
- ウィンドウフォーカス時の自動再取得無効
- QueryKeys による型安全なキー管理
```

## TypeScript 型定義

### 主要型定義 (`types/index.ts`)

- `Company` - 企業エンティティ
- `Article` - 記事エンティティ
- `DashboardStats` - ダッシュボード統計
- `TopCompany` - 上位企業（影響力スコア・ランキング付き）
- `ApiResponse<T>` - API レスポンス統一型
- `PaginatedResponse<T>` - ページネーション対応レスポンス
- `QueryKeys` - React Query キー定義

## スタイリング

### Tailwind CSS v4 設定

**カスタムコンポーネント**:
- `.dashboard-card` - ダッシュボードカード
- `.metric-card` - メトリクス表示カード
- `.btn-primary` / `.btn-secondary` - ボタンスタイル
- `.nav-link` - ナビゲーションリンク
- `.data-table` - データテーブル
- `.loading-spinner` - ローディングアニメーション

**レスポンシブ対応**:
- モバイル・タブレット・デスクトップサイズ対応
- フレキシブルグリッドレイアウト

**日本語フォント**:
- Inter + Hiragino Sans + Noto Sans JP の優先順位

## 開発・ビルド設定

### Vite 設定 (`vite.config.js`)

```javascript
// 主要設定
- Laravel Vite プラグイン統合
- Tailwind CSS v4 プラグイン
- esbuild による JSX 処理（React Fast Refresh 対応）
- 開発サーバー: localhost:5173
```

### package.json 依存関係

```json
{
  "dependencies": {
    "react": "^19.1.0",
    "react-dom": "^19.1.0",
    "react-router-dom": "^7.6.3",
    "@tanstack/react-query": "^5.81.5",
    "axios": "^1.8.2",
    "typescript": "^5.8.3"
  },
  "devDependencies": {
    "@tailwindcss/vite": "^4.0.0",
    "tailwindcss": "^4.0.0",
    "vite": "^6.2.4",
    "laravel-vite-plugin": "^1.2.0"
  }
}
```

## 開発ワークフロー

### 起動手順

```bash
# 1. Laravel 開発サーバー起動
php artisan serve

# 2. Vite 開発サーバー起動（別ターミナル）
npm run dev

# 3. ブラウザでアクセス
# http://localhost:8000
```

### ビルド

```bash
# 開発用ビルド（ホットリロード）
npm run dev

# 本番用ビルド
npm run build
```

## エラーハンドリング

### API エラー

- **404 Not Found**: 企業が見つからない場合の適切な表示
- **500 Server Error**: サーバーエラーの統一表示
- **Network Error**: ネットワークエラーのフォールバック

### ローディング状態

- **データ取得中**: スピナーアニメーション表示
- **初期化中**: フォールバックコンテンツ表示
- **エラー時**: エラーメッセージとリトライボタン

## パフォーマンス最適化

### React Query キャッシュ

- API レスポンスの適切なキャッシュ
- 重複リクエストの自動排除
- バックグラウンド更新

### Tailwind CSS 最適化

- 未使用 CSS の自動削除
- 本番ビルド時の最適化
- カスタムコンポーネントの再利用

## 今後の拡張予定

### 短期（次のスプリント）
- [ ] **検索ページ**: 企業・記事の統合検索機能
- [ ] **ランキングページ**: 期間別ランキング表示
- [ ] **フィルタリング**: 複数条件での絞り込み

### 中期（3ヶ月以内）
- [ ] **リアルタイム更新**: WebSocket 統合
- [ ] **チャート表示**: 影響力スコア推移グラフ
- [ ] **エクスポート機能**: CSV・PDF ダウンロード

### 長期（6ヶ月以内）
- [ ] **PWA 対応**: オフライン機能・プッシュ通知
- [ ] **多言語対応**: 国際化（i18n）
- [ ] **アクセシビリティ**: WCAG 2.1 AA 準拠

## トラブルシューティング

### よくある問題

1. **Tailwind CSS が適用されない**
   ```bash
   # Vite 開発サーバー再起動
   npm run dev
   ```

2. **React Query エラー**
   ```bash
   # ブラウザキャッシュクリア
   # 開発者ツール > Application > Storage > Clear storage
   ```

3. **TypeScript エラー**
   ```bash
   # 型チェック実行
   npx tsc --noEmit
   ```

## 関連ドキュメント

- [技術スタック](技術スタック.md)
- [開発環境](開発環境.md)
- [API実装状況](API実装状況.md)
- [開発フロー](開発フロー.md)