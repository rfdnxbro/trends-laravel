# 技術スタック

## フロントエンド

- **React 19.1.0**: UI フレームワーク ✅
  - コンポーネントベースの開発で再利用性が高い
  - 豊富なエコシステムとライブラリ
  - チャートライブラリ（Chart.js、D3.js等）との親和性
  - リアルタイムデータ更新に適した状態管理
  - 複雑なダッシュボードUIの構築に適している
  - **実装済み**: Layout、Dashboard、CompanyDetailページ

- **TypeScript 5.8.3**: 型安全な開発 ✅
  - 静的型チェックによるバグの早期発見
  - IDE サポートとコード補完の強化
  - **実装済み**: 完全な型定義・QueryKeys・ApiError型

- **React Router v7**: フロントエンドルーティング ✅
  - SPA（Single Page Application）ルーティング
  - **実装済み**: BrowserRouter + 複数ルート設定

- **React Query v5 (TanStack Query)**: データ状態管理 ✅
  - サーバーサイド状態管理・キャッシュ機能
  - 自動データ再取得・楽観的更新
  - **実装済み**: APIデータフェッチ・エラーハンドリング

- **Tailwind CSS v4**: CSS フレームワーク ✅
  - ユーティリティファーストで高速開発が可能
  - レスポンシブデザインの実装が容易
  - CSSファイルサイズの最適化
  - **実装済み**: カスタムコンポーネント・日本語フォント対応

- **Axios**: HTTPクライアント ✅
  - Promise ベースの HTTP ライブラリ
  - **実装済み**: CSRF対応・エラーハンドリング・タイムアウト設定

## バックエンド

- **PHP 8.2+**: プログラミング言語（8.2以上）
  - Web開発に特化した言語で開発効率が高い
  - 豊富なライブラリとフレームワーク
  - Laravel Cloudとの親和性

- **Laravel 12.0**: PHP フレームワーク
  - **キューシステム**: スクレイピングやデータ処理の非同期実行 ✅
  - **Eloquent ORM**: 複雑なリレーションと集計クエリの簡単実装 ✅
  - **Artisanコマンド**: データインポートやバッチ処理の自動化 ✅
  - **キャッシュ機能**: APIレスポンスや集計結果の高速化 ✅
  - **RESTful API**: 企業ランキング・詳細・検索API実装済み ✅
  - **API Resources**: 統一されたレスポンス形式 ✅
  - **レート制限**: 60req/minのスロットリング機能 ✅
  - **Laravel Cloud**: スケーラブルなデプロイと管理

- **PostgreSQL**: データベース
  - **時系列データに特化**: タイムスタンプや日付ベースの集計処理が強力
  - **全文検索**: 技術キーワードや企業名の検索に適している
  - **JSONデータ型**: APIレスポンスやメタデータの柔軟な保存
  - **Window関数**: ランキングや移動平均などの分析処理に最適
  - **パーティショニング**: 大量データの日付別分割管理
  - **テスト環境**: SQLite in-memoryでCI/CD高速実行

- **Redis**: インメモリデータベース
  - **キューシステム**: Laravelキューのバックエンド ✅
  - **キャッシュ**: 高速なデータキャッシュ（5分間のAPIキャッシュ） ✅
  - **セッション管理**: 分散セッションストレージ

## スクレイピング関連

- **Guzzle HTTP**: HTTPクライアント ✅
  - **非同期リクエスト**: 複数サイトの並列処理 ✅
  - **レスポンス処理**: JSONやHTMLの解析 ✅
  - **エラーハンドリング**: リトライ・タイムアウト機能 ✅

- **Symfony DomCrawler**: Webスクレイピング ✅
  - **DOMクローラー**: HTMLパースとDOM操作 ✅
  - **CSS/XPathセレクター**: 柔軟な要素選択 ✅
  - **軽量**: GoutteよりもシンプルでHTTPクライアントと分離 ✅

- **CompanyMatcher**: 企業識別システム ✅
  - **動的マッチング**: データベースベースの柔軟な企業識別 ✅
  - **複数戦略**: URL・ドメイン・ユーザー名・キーワードマッチング ✅
  - **拡張性**: 新企業追加時にコード変更不要 ✅
  - **精度重視**: 厳密マッチングで誤判定防止 ✅

## 今後実装予定

- **Laravel Horizon**: キュー監視（未実装）
  - **リアルタイム監視**: キューの実行状況確認
  - **失敗ジョブ管理**: エラーログとリトライ機能
  - **パフォーマンス分析**: 処理時間とメモリ使用量

- **Laravel Telescope**: デバッグ・監視（未実装）
  - **リクエスト監視**: HTTPリクエストの詳細ログ
  - **データベースクエリ**: 実行されたクエリの確認
  - **例外追跡**: エラーとスタックトレースの記録

## ビルド・開発ツール

- **Vite 6.2.4**: ビルドツール ✅
  - 高速な開発サーバーとホットリロード
  - **実装済み**: esbuild JSX処理・Laravel統合・Tailwind CSS連携
- **PHPUnit**: バックエンドテストフレームワーク ✅
  - **テスト数**: 429個のテストケース（Feature + Unit） ✅
  - **テスト環境**: SQLite in-memory（高速・一貫性保証） ✅
  - **テスト品質**: アトリビュート記法対応、警告ゼロ ✅
  - **自動実行**: CI/CDパイプラインで実行 ✅
- **Vitest**: フロントエンドテストフレームワーク ✅
  - **テスト数**: 158個のReactコンポーネントテストケース ✅
  - **Testing Library**: DOM操作・ユーザーインタラクションテスト ✅
  - **jsdom環境**: ブラウザ環境シミュレーション ✅
  - **自動実行**: CI/CDパイプラインで実行 ✅
- **Playwright**: E2Eテストフレームワーク ✅
  - **テスト数**: 7個のブラウザテストケース ✅
  - **テスト対象**: ユーザージャーニー・UI操作フロー ✅
  - **ブラウザ**: Chrome（Chromium）での実行 ✅
  - **並列実行**: 4ワーカーで高速実行（約2分） ✅
  - **MCP統合**: Claude Code連携でテスト自動化（issue #102完了） ✅
  - **CI環境**: PostgreSQL + Laravel開発サーバー ✅
  - **専用ワークフロー**: `.github/workflows/e2e.yml` ✅
- **Laravel Pint**: コードスタイルチェック ✅
  - **PSR-12準拠**: 自動コードフォーマット ✅
  - **自動実行**: CI/CDパイプラインで実行 ✅
- **PHPStan**: 静的解析ツール ✅
  - **解析レベル**: レベル4で完全パス ✅
  - **エラー数**: 0個（完全解決済み） ✅
  - **型安全性**: @propertyアノテーション完備 ✅
  - **自動実行**: CI/CDパイプラインで実行 ✅

## 本番環境

- **Laravel Cloud**: ホスティングサービス（本番環境候補）

## バージョン管理・CI/CD

- **Git**: バージョン管理システム
- **GitHub**: リポジトリホスティング
- **GitHub Actions**: CI/CD パイプライン ✅
  - **メインテストパイプライン**: `.github/workflows/test.yml` ✅
  - **E2E専用パイプライン**: `.github/workflows/e2e.yml` ✅
  - **Wiki同期**: `.github/workflows/sync-wiki.yml` ✅
  - **カバレッジレポート**: `.github/workflows/coverage-comment.yml` ✅
  - **実行タイミング**: PR作成時・mainブランチプッシュ時 ✅
  - **実行環境**: Ubuntu Latest・PHP 8.2・Node.js 20 ✅
  - **CI統一化**: ubuntu-latest + shivammathur/setup-php@v2 ✅
  - **並列実行**: メインCI + E2E CI 同時実行（約2分） ✅
  - **環境分離**: SQLite(Main) + PostgreSQL(E2E) ✅

## 品質管理

- **自動品質チェック**: CI/CDで完全自動化 ✅
  - PHPUnitテスト: 429テスト自動実行
  - vitestテスト: 158テスト自動実行
  - Playwright E2Eテスト: 7テスト自動実行
  - Laravel Pint: PSR-12準拠チェック
  - PHPStan: レベル4静的解析
  - フロントエンドビルド: 本番用アセット生成
- **コードレビュー**: 必須（プルリクエスト経由）
- **品質保証**: エラー隠蔽なし、警告ゼロ
- **テスト責務分離**: Unit/Feature vs E2Eの明確な分離
- **MCP統合**: Claude Codeでテスト自動化サポート（issue #102完了）

## 開発効率化ツール

- **Claude Code**: AI支援開発環境 ✅
  - **カスタムコマンド**: 開発フロー自動化 ✅
  - **GitHub Issue統合**: 自動Issue作成・更新 ✅
  - **品質チェック統合**: 段階的品質チェック実行 ✅
  - **ドキュメント連携**: 自動ドキュメント更新チェック ✅

### Claude Codeカスタムコマンド

プロジェクトに特化したカスタムコマンドを提供：

- **`/think`**: 技術的検討・実装計画立案
- **`/dev`**: 開発フロー自動実行・Issue管理統合
- **`/test`**: 包括的品質チェック（PHPUnit・Pint・PHPStan・Vitest・Playwright）
- **`/pr`**: プルリクエスト作成・CI/CD確認

**技術的特徴：**
- CLAUDE.mdの開発フロー準拠
- GitHub CLI統合によるIssue管理
- 段階的品質チェック実行
- コミットメッセージへのIssue番号自動付与
- 関連ドキュメント更新チェック機能

## 関連ドキュメント

- [開発環境](開発環境)
- [開発フロー](開発フロー)
- [CI/CD](CI-CD)
- [プロジェクト概要](プロジェクト概要)